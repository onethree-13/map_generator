# 更新日志

## [1.1.1] - 2025-01-20

### 🔧 空格处理优化
- **文本清理功能**：新增统一的`clean_text()`和`clean_tags()`函数
- **地址空格处理**：自动清理地址、名称、电话等字段中的多余空格
- **URL编码优化**：地图链接中的地点名称进行URL编码，防止空格导致的链接错误
- **数据导出优化**：在JSON和CSV导出时自动清理空格和空值

### ✨ 文本处理改进
- 去除字段首尾空格
- 将多个连续空格替换为单个空格
- 清理制表符和其他空白字符
- 规范化换行符，保留段落结构
- 实时清理用户输入的文本

### 🎯 用户体验提升
- 更整洁的数据显示
- 更准确的地图链接
- 更可靠的数据导出
- 统一的文本格式处理

### 🐛 修复
- 修复地图链接中包含空格时无法正常跳转的问题
- 修复数据显示中多余空格影响美观的问题
- 修复导出数据中空格不一致的问题

## [1.1.0] - 2025-01-20

### 🚀 重要新功能
- **多种输入模式支持**：新增三种数据输入方式
  - 📷 **上传图片**：支持PNG、JPG、JPEG、WEBP格式
  - 🌐 **图片链接**：支持HTTP/HTTPS图片URL，自动下载并处理
  - 📝 **直接文本输入**：跳过OCR步骤，直接输入文字进行结构化处理

### ✨ 新增功能
- 图片URL下载和处理功能，支持多种图片格式自动转换
- 智能图片预览和验证
- 文本输入统计信息（字符数、行数、词数）
- 优化的用户界面，采用单选按钮切换输入模式
- 增强的错误处理和用户提示

### 🔧 优化改进
- 重新设计数据提取页面，提供更清晰的操作流程
- 优化文字内容展示，采用可展开/收起的方式
- 更新侧边栏使用说明，增加输入模式说明
- 改进依赖管理，确保所需库的兼容性

### 💡 用户体验
- 更灵活的数据输入选择，适应不同使用场景
- 实时图片预览和验证反馈
- 统一的操作按钮设计和进度提示
- 详细的操作指引和错误说明

### 📚 文档更新
- 更新示例文件，展示三种输入模式的使用方法
- 完善API文档和使用说明
- 增加输入模式选择的最佳实践建议

## [1.0.2] - 2025-01-20

### ✨ 新功能
- 将通义千问API密钥配置化：可在侧边栏动态配置和更新
- 增强错误处理：API密钥配置错误时提供友好提示
- 支持运行时动态切换API密钥，无需重启应用

### 🔧 优化
- 代码结构优化：将OpenAI客户端初始化独立为函数
- 改进用户体验：配置错误时提供具体的解决建议
- 移除冗余导入：清理不必要的导入项

### 🐛 修复
- 修复字符串引号闭合问题
- 修复配置更新时的错误处理逻辑

## [1.0.1] - 2025-01-20

### 🔧 修复
- 修复 Streamlit 废弃参数警告：将 `use_column_width=True` 替换为 `use_container_width=True`
- 确保与最新版本的 Streamlit 兼容

### ✅ 验证
- 应用成功启动在 localhost:8501
- 所有功能正常运行
- 无废弃参数警告

## [1.0.0] - 2025-01-20

### 🎉 初始版本
- ✅ 实现完整的AI Agent Workflow
- ✅ 流式OCR文字提取
- ✅ 智能JSON结构化
- ✅ Function Call地理编码
- ✅ 交互式数据确认界面
- ✅ 多格式数据导出
- ✅ 完整的配置管理系统 